{"id":"blues-traveler-1","content_hash":"5debca53737304b093d1005e77330706caec6acff80079ced113c91fe847ceb1","title":"Integrate log rotation into logging system","description":"Log rotation is configured via lumberjack but not actually used. The logging system writes directly to OpenFile instead of through the rotating logger.","design":"Wire lumberjack into logging system by adding LogWriter io.Writer to HookContext. When LogWriter is present, write logs through it instead of directly to file. This will enable actual log rotation based on configured settings.","acceptance_criteria":"- LogWriter field added to HookContext\n- Logging writes through LogWriter when present\n- Log rotation settings (maxAge, maxSize, maxBackups, compress) are applied\n- Tests verify rotation behavior","status":"open","priority":3,"issue_type":"feature","created_at":"2025-10-17T11:05:23.971897-05:00","updated_at":"2025-10-17T11:05:23.971897-05:00","source_repo":"."}
{"id":"blues-traveler-10","content_hash":"41cd30e2e10965ba89e7edbb82891351a45868b1fadebd18799aef843ab7b4c2","title":"Refactor top 3 complex functions (cognitive complexity \u0026gt;80)","description":"Reduce cognitive complexity of:\n1. newHooksCustomSyncCommand: 103 (target: \u0026lt;30) - internal/cmd/hooks.go:763:1\n2. newHooksCustomInstallCommand: 81 (target: \u0026lt;30) - internal/cmd/hooks.go:574:1  \n3. newHooksCustomBlockedCommand: 52 (target: \u0026lt;30) - internal/cmd/hooks.go:1161:1\n\nExtract nested logic into helper functions with descriptive names.","acceptance_criteria":"All three functions have cognitive complexity \u0026lt;30, tests passing","status":"closed","priority":1,"issue_type":"task","assignee":"klauern","created_at":"2025-10-25T16:34:05.559303-05:00","updated_at":"2025-10-25T18:13:24.355532-05:00","closed_at":"2025-10-25T18:13:24.355532-05:00","source_repo":".","labels":["high-roi","priority-1","refactoring"],"dependencies":[{"issue_id":"blues-traveler-10","depends_on_id":"blues-traveler-17","type":"related","created_at":"2025-10-25T16:36:58.734954-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-10","depends_on_id":"blues-traveler-8","type":"parent-child","created_at":"2025-10-25T16:37:15.577819-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-11","content_hash":"4d333d8c18d5b292b762ef01a3876db28ec76807e4e30552f492c7531af23403","title":"Add error checking to defer statements in tests","description":"Fix 31 unchecked errors, primarily in test cleanup code. Replace patterns like:\n  defer os.RemoveAll(tempDir)\n  defer os.Setenv(...)\n  \nWith proper error handling:\n  t.Cleanup(func() {\n      if err := os.RemoveAll(tempDir); err != nil {\n          t.Logf(\"cleanup failed: %v\", err)\n      }\n  })","acceptance_criteria":"All errcheck linter issues resolved (31 occurrences)","status":"closed","priority":1,"issue_type":"task","assignee":"klauern","created_at":"2025-10-25T16:34:05.716457-05:00","updated_at":"2025-10-25T18:42:06.45418-05:00","closed_at":"2025-10-25T18:42:06.45418-05:00","source_repo":".","labels":["error-handling","high-roi","priority-1"],"dependencies":[{"issue_id":"blues-traveler-11","depends_on_id":"blues-traveler-17","type":"related","created_at":"2025-10-25T16:36:58.873102-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-11","depends_on_id":"blues-traveler-8","type":"parent-child","created_at":"2025-10-25T16:37:15.69978-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-12","content_hash":"650e71b0952c9fdc169b299ee9992daa6f579fc9adf5aa99ab5dd0ba8109b658","title":"Create constants for repeated strings","description":"Replace 10 occurrences of string duplication with constants:\n- \"project\" - 11 occurrences\n- \"global\" - 11 occurrences  \n- \"json\" - 12 occurrences\n- \"toml\" - 4 occurrences\n- Tool names: \"Bash\", \"Edit\", \"Write\" - 6 occurrences each\n\nCreate constant package or add to existing constants.","acceptance_criteria":"All goconst linter issues resolved (10 occurrences), constants defined and used throughout codebase","status":"closed","priority":1,"issue_type":"task","assignee":"klauern","created_at":"2025-10-25T16:34:05.88164-05:00","updated_at":"2025-10-25T18:51:50.309881-05:00","closed_at":"2025-10-25T18:51:50.309881-05:00","source_repo":".","labels":["duplication","high-roi","priority-1"],"dependencies":[{"issue_id":"blues-traveler-12","depends_on_id":"blues-traveler-17","type":"related","created_at":"2025-10-25T16:36:59.011951-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-12","depends_on_id":"blues-traveler-8","type":"parent-child","created_at":"2025-10-25T16:37:15.835335-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-13","content_hash":"d9f7b238515e891aa47117ef41d5da3b06ea67128ac6723c9dcbfbeeb06ac2e9","title":"Refactor tests to table-driven patterns","description":"Simplify complex test functions using Go table-driven test pattern:\n- TestLoadConfigWithFallback: complexity 22 - internal/config/enhanced_loading_test.go:20:1\n- TestGetMigrationStatus: complexity 18 - internal/config/migration_test.go:379:1  \n- TestActualMigration: complexity 15 - internal/config/migration_test.go:180:1\n- runConfigSync: complexity 44 - internal/cmd/config_sync_test.go:150:1\n\nBreak into smaller test cases with clear names.","acceptance_criteria":"Test complexity reduced below 15 for all identified functions, tests remain comprehensive","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-25T16:34:06.054463-05:00","updated_at":"2025-10-25T21:04:26.031157-05:00","closed_at":"2025-10-25T21:04:26.031157-05:00","source_repo":".","labels":["medium-roi","priority-2","testing"],"dependencies":[{"issue_id":"blues-traveler-13","depends_on_id":"blues-traveler-8","type":"parent-child","created_at":"2025-10-25T16:37:15.958237-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-14","content_hash":"7ab92896665a0a8e674d408bc48b704dc8c4d943eccb6eb9ac0fb0c9609035e7","title":"Split large config files","description":"Refactor oversized config-related files:\n- internal/config/migration_test.go: 571 lines (complexity: 22, 18, 15, 13, 12)\n- internal/cmd/config_xdg.go: 566 lines (complexity: 38)\n- internal/config/settings.go: 560 lines (complexity: 18)\n- internal/config/enhanced_loading_test.go: 495 lines (complexity: 22)\n\nSplit by logical concern while maintaining cohesion.","acceptance_criteria":"Files split into smaller units (\u0026lt;400 lines), complexity metrics improved","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-25T16:34:06.218989-05:00","updated_at":"2025-10-26T13:08:42.61011-05:00","closed_at":"2025-10-26T13:08:42.61011-05:00","source_repo":".","labels":["medium-roi","priority-2","refactoring"],"dependencies":[{"issue_id":"blues-traveler-14","depends_on_id":"blues-traveler-8","type":"parent-child","created_at":"2025-10-25T16:37:16.079365-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-15","content_hash":"3487d89ee36e835871593124ee08e5139dd144760449b59d103191aded65b0a3","title":"Add godoc comments to exported functions","description":"Fix 78 revive issues related to missing documentation:\n- Package comments missing: 9 packages\n- Exported functions without comments: 30+\n- Unused parameter names: 25+\n\nAdd proper godoc comments following Go conventions.","acceptance_criteria":"All revive linter issues resolved (78 occurrences), godoc complete","notes":"Current status (2025-10-26):\n- Reduced from 78 revive issues to 42\n- Fixed: All unused parameter issues (renamed to _)\n- Fixed: Added package comment for config_sync_test.go\n- Remaining: 42 revive issues (missing comments on exported functions/types across 9 packages)\n\nNext steps: Add godoc comments systematically to all exported functions, types, and methods.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-25T16:34:06.394996-05:00","updated_at":"2025-10-26T12:53:17.804563-05:00","closed_at":"2025-10-26T12:53:17.804563-05:00","source_repo":".","labels":["documentation","medium-roi","priority-2"],"dependencies":[{"issue_id":"blues-traveler-15","depends_on_id":"blues-traveler-8","type":"parent-child","created_at":"2025-10-25T16:37:16.203078-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-15a","content_hash":"2fabc820f988453fa862baa9982b7d44a8382785ff290976e63859b7f036a193","title":"Refactor config_hook.go to eliminate code duplication","description":"The preHandler and postHandler functions have significant code duplication (37 lines duplicated). Also, handleCursorResponsePre and handleCursorResponsePost have 52 lines of duplicate code. This violates DRY principle and makes maintenance harder.","design":"Extract common logic into shared helper functions:\n1. Create a generic executeAndParseResponse() function for the common execution + parsing logic\n2. Create a handleCursorResponse() function that takes a response type parameter\n3. Use generics or interface{} with type assertions to handle Pre vs Post response types\n4. Keep only the event-specific logic in preHandler/postHandler","acceptance_criteria":"- dupl linter warnings for config_hook.go are eliminated\n- preHandler and postHandler call shared helper functions\n- All existing tests still pass\n- No change in behavior or functionality","status":"open","priority":2,"issue_type":"chore","created_at":"2025-11-07T20:34:56.873608-06:00","updated_at":"2025-11-07T20:34:56.873608-06:00","source_repo":"."}
{"id":"blues-traveler-16","content_hash":"d1db57ec29b6769e9feaf3b387d93073144a979718262606ef137a49fe0b5a8f","title":"Remove or fix unused parameters","description":"Address 2 unparam issues:\n- (*FetchBlockerHook).loadBlockedFromConfig always returns nil error - internal/hooks/fetch_blocker.go:177:70\n- Other functions with unused parameters\n\nRemove unused parameters or add _ prefix if needed for interface compliance.","acceptance_criteria":"All unparam linter issues resolved","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-25T16:34:06.552775-05:00","updated_at":"2025-10-26T10:11:43.621574-05:00","closed_at":"2025-10-26T10:11:43.621574-05:00","source_repo":".","labels":["cleanup","medium-roi","priority-2"],"dependencies":[{"issue_id":"blues-traveler-16","depends_on_id":"blues-traveler-8","type":"parent-child","created_at":"2025-10-25T16:37:16.338152-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-17","content_hash":"1340f8b2b8d75acf2fd3fb7d2b7acb53919661fd660edd96263440dacdad8598","title":"Setup CI pipeline with golangci-lint","description":"Integrate golangci-lint into CI/CD pipeline using .golangci.yml configuration.\n\nSetup automated checks for:\n- Cyclomatic complexity\n- Cognitive complexity  \n- Error checking\n- Code duplication\n- Documentation\n\nConfigure to fail on new high-complexity code.","acceptance_criteria":"CI running golangci-lint, blocking PRs with complexity violations","status":"open","priority":3,"issue_type":"task","created_at":"2025-10-25T16:34:06.717655-05:00","updated_at":"2025-10-25T16:34:06.717655-05:00","source_repo":".","labels":["ci","long-term","priority-3"],"dependencies":[{"issue_id":"blues-traveler-17","depends_on_id":"blues-traveler-18","type":"blocks","created_at":"2025-10-25T16:36:59.152736-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-18","content_hash":"dc40c0ec85541aab34d1cbf3df2418dc6c6b56f1f162aaf78baf16bee8ed8ffb","title":"Establish complexity budget and prevention","description":"Incrementally reduce complexity thresholds to prevent regression:\n- Phase 1: Current state (cyclop: 15, cognit: 20)\n- Phase 2: Reduce to 10\n- Phase 3: Reduce to 8  \n- Phase 4: Target 5\n\nDocument complexity budget policy and enforce in code reviews.","acceptance_criteria":"Complexity policy documented, thresholds reduced to target levels over time","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-25T16:34:06.88781-05:00","updated_at":"2025-10-26T12:53:19.028051-05:00","closed_at":"2025-10-26T12:53:19.028051-05:00","source_repo":".","labels":["long-term","priority-3","process"]}
{"id":"blues-traveler-19","content_hash":"b1039465e51da1cb06e5b589d591ae0e866e551b2280f00e1fdac247e04c0dc7","title":"Fix variable shadowing built-in 'any' type","description":"Rename variable in internal/core/expressions.go:27:2 that shadows Go 1.18+ built-in 'any' type alias.\n\nChange to anyMatch or hasAny. Consider if custom expression evaluation can be simplified.","acceptance_criteria":"Variable renamed, no shadowing of built-in types","status":"closed","priority":2,"issue_type":"bug","assignee":"klauern","created_at":"2025-10-25T16:34:07.064132-05:00","updated_at":"2025-10-25T19:59:14.070128-05:00","closed_at":"2025-10-25T19:59:14.070128-05:00","source_repo":".","labels":["modernization","priority-2","quick-fix"],"dependencies":[{"issue_id":"blues-traveler-19","depends_on_id":"blues-traveler-8","type":"parent-child","created_at":"2025-10-25T16:37:16.467588-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-2","content_hash":"59237d3732a2903293cd192364ee1c2d1c39820c09034388b0f58824b21aec3e","title":"Add external tool availability detection","description":"Format and vet hooks depend on external tools (prettier, uvx, ruff, ty, fd) without checking if they're available, leading to confusing error messages.","design":"Add lazy tool detection with helpful error messages. Check tool availability before use and provide installation instructions if missing. Tools to check: prettier, uvx, ruff, ty, fd.","acceptance_criteria":"- Tool availability check before execution\n- Clear error messages with installation instructions\n- Graceful degradation when tools are missing\n- Tests for tool detection logic","status":"open","priority":3,"issue_type":"feature","created_at":"2025-10-17T11:05:24.063588-05:00","updated_at":"2025-10-17T11:05:24.063588-05:00","source_repo":"."}
{"id":"blues-traveler-20","content_hash":"b7e22e814fc432bccc5d85d0d2f4f56504407ba5350b8fe4009a6f92a9de5b28","title":"Add hooks doctor command to diagnose installation status","description":"Implement a `hooks doctor` command that shows:\n- Which hooks are installed\n- Installation contexts (project vs user/global)\n- Configuration file locations and their precedence\n- Validation status of hook configurations\n- Potential issues or conflicts\n\nThis will help users understand their hooks setup and troubleshoot issues.","design":"Based on exploration of the codebase:\n1. Add new subcommand to internal/cmd/hooks.go under NewHooksCommand\n2. Create newHooksDoctorCommand() function\n3. Leverage existing config.LoadHooksConfig() to discover configurations\n4. Report on:\n   - Project-level hooks (.claude/hooks/)\n   - Global-level hooks (~/.claude/hooks/)\n   - Configuration merge order and precedence\n   - Validation results\n5. Provide helpful output showing installation health","acceptance_criteria":"- `blues-traveler hooks doctor` command runs successfully\n- Shows installed hooks from both project and global contexts\n- Displays configuration file locations\n- Validates hook configurations and reports issues\n- Output is clear and actionable\n- Tests added for the new command","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-25T18:34:01.5946-05:00","updated_at":"2025-10-25T18:53:24.407652-05:00","closed_at":"2025-10-25T18:53:24.407652-05:00","source_repo":"."}
{"id":"blues-traveler-21","content_hash":"9c8e050ce2dd2e09fdfca5d8e95824019a13fee534ac025003f57c5c6ed8145e","title":"Reduce cognitive complexity in newHooksInstallCommand (46 \u003e 20)","description":"Function newHooksInstallCommand in internal/cmd/hooks_install.go:15 has cognitive complexity of 46, exceeding threshold of 20","status":"closed","priority":2,"issue_type":"task","assignee":"klauern","created_at":"2025-10-25T19:49:38.806101-05:00","updated_at":"2025-10-25T20:10:44.071817-05:00","closed_at":"2025-10-25T20:10:44.071817-05:00","source_repo":".","labels":["complexity","gocognit","refactor"]}
{"id":"blues-traveler-22","content_hash":"ded0af42c3817dc23b0cfc15e55ab469ae570d73fd2c211a9a0c803177fb2c39","title":"Reduce cognitive complexity in newHooksCustomInitCommand (47 \u003e 20)","description":"Function newHooksCustomInitCommand in internal/cmd/hooks_custom_init.go:15 has cognitive complexity of 47, exceeding threshold of 20","status":"closed","priority":2,"issue_type":"task","assignee":"klauern","created_at":"2025-10-25T19:49:38.939257-05:00","updated_at":"2025-10-25T20:10:44.471892-05:00","closed_at":"2025-10-25T20:10:44.471892-05:00","source_repo":".","labels":["complexity","gocognit","refactor"]}
{"id":"blues-traveler-23","content_hash":"d625838d233ba8cda2c9a0797d72f567ec53a4d4d95d49e20ced6ed34ee43e39","title":"Reduce cognitive complexity in FetchBlockerHook.preToolUseHandler (21 \u003e 20)","description":"Function (*FetchBlockerHook).preToolUseHandler in internal/hooks/fetch_blocker.go:39 has cognitive complexity of 21, exceeding threshold of 20","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-25T19:49:39.070161-05:00","updated_at":"2025-10-25T20:56:26.665226-05:00","closed_at":"2025-10-25T20:56:26.665226-05:00","source_repo":".","labels":["complexity","gocognit","refactor"]}
{"id":"blues-traveler-24","content_hash":"72b1b45ffb8bec17ae7308c2f61503718451440c48ec524352baf34358b10a75","title":"Reduce cognitive complexity in init function (22 \u003e 20)","description":"Function init in internal/hooks/init.go:11 has cognitive complexity of 22, exceeding threshold of 20","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-25T19:49:39.205266-05:00","updated_at":"2025-10-25T20:56:26.61924-05:00","closed_at":"2025-10-25T20:56:26.61924-05:00","source_repo":".","labels":["complexity","gocognit","refactor"]}
{"id":"blues-traveler-25","content_hash":"c818be0a286e56f5656fd5a30ab7402f3c90eb3d2ec2b3b71dfe93f171d1b5cd","title":"Reduce cognitive complexity in SecurityHook.preToolUseHandler (29 \u003e 20)","description":"Function (*SecurityHook).preToolUseHandler in internal/hooks/security.go:36 has cognitive complexity of 29, exceeding threshold of 20","status":"closed","priority":2,"issue_type":"task","assignee":"klauern","created_at":"2025-10-25T19:49:39.33927-05:00","updated_at":"2025-10-25T20:10:44.847654-05:00","closed_at":"2025-10-25T20:10:44.847654-05:00","source_repo":".","labels":["complexity","gocognit","refactor"]}
{"id":"blues-traveler-26","content_hash":"58bf289eba4cb28110ed3bd286e2d47cf88a8675b14a1e1d881358f6cbf1b618","title":"Reduce cognitive complexity in GetConfigGroupsInSettings (22 \u003e 20)","description":"Function GetConfigGroupsInSettings in internal/config/settings.go:502 has cognitive complexity of 22, exceeding threshold of 20","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-25T19:49:39.487766-05:00","updated_at":"2025-10-25T20:56:26.566775-05:00","closed_at":"2025-10-25T20:56:26.566775-05:00","source_repo":".","labels":["complexity","gocognit","refactor"]}
{"id":"blues-traveler-27","content_hash":"ef7011f253bfb5160fe110eec193021f8a87c31f66d8db01662ea6d0963fbd39","title":"Reduce cognitive complexity in TestLoadConfigWithFallback (25 \u003e 20)","description":"Function TestLoadConfigWithFallback in internal/config/enhanced_loading_test.go:20 has cognitive complexity of 25, exceeding threshold of 20","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-25T19:49:39.635793-05:00","updated_at":"2025-10-25T20:56:26.526044-05:00","closed_at":"2025-10-25T20:56:26.526044-05:00","source_repo":".","labels":["complexity","gocognit","refactor","test"]}
{"id":"blues-traveler-28","content_hash":"8a5b52164288118f76cb5ec03096975ef69526ea481559022d233f967f101aa4","title":"Reduce cognitive complexity in mergeHookMatcher (28 \u003e 20)","description":"Function mergeHookMatcher in internal/config/settings.go:244 has cognitive complexity of 28, exceeding threshold of 20","status":"closed","priority":2,"issue_type":"task","assignee":"klauern","created_at":"2025-10-25T19:49:39.79073-05:00","updated_at":"2025-10-25T20:10:45.304264-05:00","closed_at":"2025-10-25T20:10:45.304264-05:00","source_repo":".","labels":["complexity","gocognit","refactor"]}
{"id":"blues-traveler-29","content_hash":"447184599b1e1944ce41ca8c48d2a5e83c85437e365a6159e8576f893d4ae33d","title":"Reduce cognitive complexity in candidateConfigPaths (32 \u003e 20)","description":"Function candidateConfigPaths in internal/config/hooks_config.go:44 has cognitive complexity of 32, exceeding threshold of 20","status":"closed","priority":2,"issue_type":"task","assignee":"klauern","created_at":"2025-10-25T19:49:39.936245-05:00","updated_at":"2025-10-25T20:10:45.72853-05:00","closed_at":"2025-10-25T20:10:45.72853-05:00","source_repo":".","labels":["complexity","gocognit","refactor"]}
{"id":"blues-traveler-3","content_hash":"6cf23e5aefce3d95700db8b922715e2c5b101fc913893bfde849e1d8f788eb54","title":"Add settings precedence tests","description":"No tests exist for project-override-global configuration scenarios. Need comprehensive tests to ensure project settings properly override global settings.","acceptance_criteria":"- Test: project enabled + global disabled = enabled\n- Test: project disabled + global enabled = disabled  \n- Test: project nil + global enabled = enabled\n- Test: project nil + global disabled = disabled\n- All precedence scenarios covered","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-17T11:05:24.144727-05:00","updated_at":"2025-10-17T11:05:24.144727-05:00","source_repo":"."}
{"id":"blues-traveler-30","content_hash":"663d37b72bfe6a7c4545dcf1b7b1d4b0e287372a56b1b0fbd7c3c6216aa2bc82","title":"Reduce cognitive complexity in MockCommandExecutor.WasCommandExecuted (22 \u003e 20)","description":"Function (*MockCommandExecutor).WasCommandExecuted in internal/core/mocks.go:159 has cognitive complexity of 22, exceeding threshold of 20","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-25T19:49:40.100496-05:00","updated_at":"2025-10-25T20:56:26.464558-05:00","closed_at":"2025-10-25T20:56:26.464558-05:00","source_repo":".","labels":["complexity","gocognit","refactor","test"]}
{"id":"blues-traveler-31","content_hash":"d0bbedcc153a21063de768dac4f54576682ef2c0768746f5bbbc434f41ff6963","title":"Fix path traversal vulnerability in hooks custom init","description":"The --name flag in hooks_custom_init.go:114 allows path traversal attacks. Need to sanitize input to prevent directory escape using filepath.Base and validate no path separators.","design":"Sanitize --name input:\n1. Use filepath.Base to get plain filename\n2. Reject if filepath.IsAbs or contains path separators\n3. Reject if empty, \".\", or \"..\"\n4. Then apply .yml/.yaml extension logic","acceptance_criteria":"- Cannot create files outside .claude/hooks directory\n- Absolute paths rejected with clear error\n- Path separators rejected with clear error\n- Empty/dot names rejected","status":"closed","priority":1,"issue_type":"bug","assignee":"klauern","created_at":"2025-10-25T20:02:38.871545-05:00","updated_at":"2025-10-25T20:16:37.189143-05:00","closed_at":"2025-10-25T20:16:37.189143-05:00","source_repo":".","labels":["critical","security"]}
{"id":"blues-traveler-32","content_hash":"38f525f0ab41cd4464042668711b0337edd69cecbcbe23f03545fd8b32e34c80","title":"Fix compilation error in hooks_doctor_test.go","description":"Test uses nonexistent filepath.HasPrefix function at line 12 and 195-203, causing compilation failure.","design":"Replace filepath.HasPrefix with proper check:\n1. Import \"strings\"\n2. Use strings.HasPrefix on cleaned paths\n3. Add path separator to avoid false matches","acceptance_criteria":"- Tests compile successfully\n- Prefix check correctly identifies global vs project paths","status":"closed","priority":1,"issue_type":"bug","assignee":"klauern","created_at":"2025-10-25T20:02:39.105528-05:00","updated_at":"2025-10-25T20:14:52.316387-05:00","closed_at":"2025-10-25T20:14:52.316387-05:00","source_repo":".","labels":["critical","testing"]}
{"id":"blues-traveler-33","content_hash":"51763981ddb5d99f7b460f32c7a4f15a6f310186a7a9b8fc6447ec6a2fb0aa4f","title":"Add event validation to sync command to prevent data loss","description":"hooks_custom_sync.go:27 lacks event validation. Invalid --event values cause RemoveConfigGroupFromSettings to remove hooks across ALL events, leading to data loss.","design":"Add event validation to parseSyncOptions:\n1. Pass isValidEventType and validEventTypes to newHooksCustomSyncCommand\n2. Validate event filter before processing\n3. Return clear error listing valid events\n4. Match pattern used in install command","acceptance_criteria":"- Invalid event names rejected with helpful error\n- Valid events listed in error message\n- No data loss on typos\n- Sync and install have identical validation","status":"closed","priority":1,"issue_type":"bug","assignee":"klauern","created_at":"2025-10-25T20:02:39.341658-05:00","updated_at":"2025-10-25T20:19:11.207065-05:00","closed_at":"2025-10-25T20:19:11.207065-05:00","source_repo":".","labels":["critical","data-loss"]}
{"id":"blues-traveler-34","content_hash":"088e7300a9daafbf033e7cec587cd48d80b4f597667b06c838560b34ee757b2c","title":"Fix uninstall command to handle flags and path changes","description":"hooks_install.go:251 uses exact string matching for uninstall, which fails when hooks were installed with --log/--format flags or when executable path changes.","design":"Implement removeHookTypeFromSettings helper:\n1. Match by hook type pattern (not exact command)\n2. Support \"hooks run \u0026lt;type\u0026gt;\" with any flags\n3. Handle different executable paths\n4. Remove across all event types","acceptance_criteria":"- Uninstall works regardless of --log/--format flags\n- Uninstall works if binary path changed\n- All instances of hook type removed across events\n- Clear error if hook type not found","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T20:02:39.57046-05:00","updated_at":"2025-10-25T20:31:07.892099-05:00","closed_at":"2025-10-25T20:31:07.892099-05:00","source_repo":".","labels":["bug","critical"]}
{"id":"blues-traveler-35","content_hash":"8c4b950400b0c43883ac28eff2b096d5d4369db47299f5fdddc3d08240e112dc","title":"Fix debug logger nil panic and resource leaks","description":"debug.go:71-92 has multiple issues: nil logger panics in case blocks, missing directory creation, file descriptor leak, incorrect log path in message, string literals instead of constants.","design":"Fix debug hook initialization:\n1. Guard all logger calls with nil check or helper\n2. Create .claude/hooks dir before opening log file\n3. Add defer to close log file\n4. Correct message to show actual path (.claude/hooks/debug.log)\n5. Use ToolRead/ToolGlob constants","acceptance_criteria":"- No nil pointer panics\n- Log file created successfully\n- File descriptor closed on exit\n- Message shows correct log path\n- Uses named constants consistently","status":"closed","priority":1,"issue_type":"bug","assignee":"klauern","created_at":"2025-10-25T20:02:39.815739-05:00","updated_at":"2025-10-25T20:23:59.858623-05:00","closed_at":"2025-10-25T20:23:59.858623-05:00","source_repo":".","labels":["bug","critical"]}
{"id":"blues-traveler-36","content_hash":"52e4a058c1be8c20e3454928951d2eb73fb624950e820c8780bfc1586d26cf34","title":"Fix settings file existence detection in doctor command","description":"hooks_doctor.go:95 always reports settings file exists because LoadSettings returns empty settings when file is missing, masking os.IsNotExist errors.","design":"Check file existence before loading:\n1. Use os.Stat on settingsPath first\n2. If IsNotExist, show \"No settings file found\" message\n3. Then call LoadSettings\n4. Apply same pattern to checkGlobalSettings","acceptance_criteria":"- Correctly reports when settings file missing\n- Differentiates between missing file and load error\n- Both project and global checks work correctly","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-10-25T20:02:40.051675-05:00","updated_at":"2025-10-26T12:56:33.393337-05:00","closed_at":"2025-10-26T12:56:33.393337-05:00","source_repo":".","labels":["bug"]}
{"id":"blues-traveler-37","content_hash":"fdefd6751f7569bc6a068619b34bf94f4cc5b21c9b255d92f4a5a444de6eb26c","title":"Add per-file config discovery to doctor command","description":"hooks_doctor.go:367 getCandidateConfigPaths doesn't enumerate .claude/hooks/*.yml|*.yaml files, causing false negatives when doctor says it searches hooks/*.yml.","design":"Add directory enumeration:\n1. Use os.ReadDir on .claude/hooks for project scope\n2. Filter for .yml and .yaml files\n3. Add matched files to paths slice\n4. Repeat for global scope ~/.claude/hooks","acceptance_criteria":"- Doctor discovers all .yml/.yaml files in .claude/hooks\n- Both project and global hooks dirs scanned\n- Discovery matches documentation claims","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-10-25T20:02:40.291892-05:00","updated_at":"2025-10-26T12:56:32.961059-05:00","closed_at":"2025-10-26T12:56:32.961059-05:00","source_repo":".","labels":["bug"]}
{"id":"blues-traveler-38","content_hash":"188730e6063384a880a3297d20bb7cfec3168bb3ebdf830d36b836effe68aa57","title":"Fix scope detection for config files in doctor command","description":"hooks_doctor.go:176 uses home directory prefix for scope detection, mislabeling project files located under user's home as \"global\".","design":"Compare against specific ~/.claude path:\n1. Compute globalPrefix as filepath.Join(home, \".claude\")\n2. Mark as global only if file equals or has that specific prefix\n3. Otherwise mark as project","acceptance_criteria":"- Project files under home correctly labeled as \"project\"\n- Only ~/.claude/* files labeled as \"global\"\n- Scope detection accurate for all cases","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-10-25T20:02:40.560129-05:00","updated_at":"2025-10-26T12:56:32.529799-05:00","closed_at":"2025-10-26T12:56:32.529799-05:00","source_repo":".","labels":["bug"]}
{"id":"blues-traveler-39","content_hash":"97d810d066717413acefadb03ee5ea87b66bdb1dd3935dd203a271bcff5acb5f","title":"Wire --init flag in custom install command","description":"hooks_custom_install.go:26 declares --init flag but never uses it. loadOrCreateGroup is always called with false, so the flag has no effect.","design":"Pass flag value to loadAndPrepareConfig:\n1. Read cmd.Bool(\"init\") in action\n2. Pass to loadAndPrepareConfig as parameter\n3. Forward to loadOrCreateGroup call","acceptance_criteria":"- --init flag actually creates stub group\n- Flag value propagated through call chain\n- Group creation works as documented","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-10-25T20:02:40.818401-05:00","updated_at":"2025-10-26T12:56:32.109561-05:00","closed_at":"2025-10-26T12:56:32.109561-05:00","source_repo":".","labels":["bug"]}
{"id":"blues-traveler-4","content_hash":"51b9171a714f8005d2179aa7eb3553751986dc531caa73d850e231f04c552b71","title":"Add diagnose command","description":"No way to check tool availability or configuration status. A diagnose command would help users troubleshoot issues.","design":"Add 'blues-traveler diagnose' command that checks:\n- External tool availability (gofumpt, prettier, fd, uvx, etc)\n- Configuration file locations and validity\n- Logging status and rotation config\n- Installed hooks\nProvide actionable output with installation instructions for missing tools.","acceptance_criteria":"- Command shows tool availability status\n- Shows configuration file paths\n- Shows logging and rotation status\n- Provides installation instructions for missing tools\n- Tests for diagnose command","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-17T11:05:24.227799-05:00","updated_at":"2025-10-26T12:56:34.690493-05:00","closed_at":"2025-10-26T12:56:34.690493-05:00","source_repo":"."}
{"id":"blues-traveler-40","content_hash":"0412db6df0102f42380b5b4da32f4374b957b9594b24e1a56c0df1444a2331a8","title":"Fix error format messages to reflect JSON-only support","description":"Multiple files reference YAML/TOML in error messages when only JSON is supported: config_xdg.go:522, hooks_install.go:123, hooks_install.go:236-239.","design":"Update error messages:\n1. Replace \"valid JSON/TOML\" with \"valid JSON\"\n2. Replace \"valid YAML/JSON\" with \"valid JSON\"\n3. Verify actual format support in each case","acceptance_criteria":"- Error messages accurately reflect supported formats\n- No mention of unsupported formats\n- Users not misled about capabilities","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T20:02:41.065657-05:00","updated_at":"2025-10-26T17:38:16.760972-05:00","closed_at":"2025-10-26T17:38:16.760972-05:00","source_repo":".","labels":["bug","documentation"]}
{"id":"blues-traveler-41","content_hash":"e6924804e1eb006963e12d17a9108a66ee10702b1afc7fa5a7df926199f80ae3","title":"Add path quoting for commands with spaces","description":"hooks_install.go:100-107 doesn't quote execPath when constructing hook commands. Paths with spaces will break if runtime tokenizes by whitespace.","design":"Quote executable paths in commands:\n1. Verify how hooks execute commands (shell vs argv)\n2. Use %q format for execPath if needed\n3. Apply to all command construction sites","acceptance_criteria":"- Hooks work with executable paths containing spaces\n- Proper quoting based on execution model\n- All command construction sites updated","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T20:02:41.319498-05:00","updated_at":"2025-10-26T17:40:20.125133-05:00","closed_at":"2025-10-26T17:40:20.125133-05:00","source_repo":".","labels":["bug"]}
{"id":"blues-traveler-42","content_hash":"690c3a84d646fcc4051891d997f0d55e6f9bfe1d405ef8f8a65bd105719d2b71","title":"Fix sync change counting to exclude duplicates","description":"hooks_helpers.go:313-318 increments changed counter even when hook already exists, overcounting changes in sync operations.","design":"Use merge result to count changes:\n1. Capture AddHookToSettings result\n2. Check if WasDuplicate\n3. Only increment changed for actual additions/replacements","acceptance_criteria":"- Changed count reflects actual modifications\n- Duplicates not counted as changes\n- Sync reports accurate change summary","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-10-25T20:02:41.749864-05:00","updated_at":"2025-10-26T17:40:49.485095-05:00","closed_at":"2025-10-26T17:40:49.485095-05:00","source_repo":".","labels":["bug"]}
{"id":"blues-traveler-43","content_hash":"34f0e45108aae9d97cb7f466ed4cf814574219ed66480d442e2f4c1c2abf0863","title":"Increase docstring coverage to 80%","description":"Current docstring coverage is 71.74%, below the required 80% threshold per project standards.","design":"Add docstrings to exported items:\n1. Run coverage analysis to find missing docstrings\n2. Add godoc-style comments to exported functions/types\n3. Focus on new code from this PR\n4. Verify 80%+ coverage before merge","acceptance_criteria":"- Docstring coverage \u003e= 80%\n- All exported items documented\n- Documentation follows godoc conventions","status":"in_progress","priority":3,"issue_type":"chore","created_at":"2025-10-25T20:02:43.156384-05:00","updated_at":"2025-10-26T17:42:59.893453-05:00","source_repo":".","labels":["chore","documentation"]}
{"id":"blues-traveler-44","content_hash":"3d4fce5e179f99f560f7e28f1c3e49e6247cc8412db794d0fb2e9317c25f15fa","title":"Fix minor code quality issues","description":"Collection of small issues: cmd_exec naming (config_xdg.go:299), dead variable originalWalkFunc (migration_test.go:73), help text outdated (config_xdg.go:470), compress flag (config_xdg.go:548).","design":"Fix miscellaneous issues:\n1. Rename cmd_exec to cmdExec\n2. Remove unused originalWalkFunc\n3. Update help text to reflect XDG paths\n4. Use Command.IsSet for --compress flag","acceptance_criteria":"- All variable names follow Go idioms\n- No dead code\n- Help text accurate\n- Compress flag supports explicit false","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-10-25T20:02:43.411822-05:00","updated_at":"2025-10-26T17:42:59.345814-05:00","closed_at":"2025-10-26T17:42:59.345814-05:00","source_repo":".","labels":["chore","code-quality"]}
{"id":"blues-traveler-45","content_hash":"58d9172155fae9b22a116ef845a71b94360ca3160b9bc9fae1e45a3a540f7bb6","title":"Review and adjust golangci-lint thresholds","description":"Current maintidx threshold (under: 20) may be too strict. cyclop skip-tests: false may generate noise in test code.","design":"Review linter configuration:\n1. Evaluate maintidx threshold effectiveness (20 vs 40-50)\n2. Assess test complexity checking impact\n3. Verify team can address all flagged issues\n4. Adjust thresholds based on findings","acceptance_criteria":"- Linter configuration sustainable for team\n- Thresholds catch real issues without noise\n- Documented rationale for settings","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-25T20:02:43.662416-05:00","updated_at":"2025-10-26T12:53:18.624354-05:00","closed_at":"2025-10-26T12:53:18.624354-05:00","source_repo":".","labels":["chore","tooling"]}
{"id":"blues-traveler-46","content_hash":"01aa0ec0e6e708935e923da11111e6f63a5269033770a7c2bcff90705a28dbb9","title":"Replace os.Exit with error returns in install helpers","description":"hooks_install.go:340-409 calls os.Exit from helper functions, bypassing defers and complicating testing.","design":"Refactor uninstallAllKlauerHooks:\n1. Return error instead of calling os.Exit\n2. Handle error in CLI action\n3. Let action handle printing and exit","acceptance_criteria":"- No os.Exit calls from helpers\n- Defers execute properly\n- Functions testable in isolation\n- CLI action handles exit codes","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-10-25T20:03:16.339312-05:00","updated_at":"2025-10-26T16:40:48.309661-05:00","closed_at":"2025-10-26T16:40:48.309661-05:00","source_repo":".","labels":["testing"]}
{"id":"blues-traveler-47","content_hash":"5c1a3a23a4cbc9989154eecad9c427186856291b6ed1b3d0e7262928da8d2d6d","title":"Improve error messaging for missing settings files","description":"hooks_helpers.go:91-107 prints \"No hooks installed\" even when settings file doesn't exist, not distinguishing between empty file and missing file.","design":"Add file existence check:\n1. Use os.Stat on settingsPath\n2. If IsNotExist, print \"No settings file found\"\n3. Otherwise print \"No hooks installed\"","acceptance_criteria":"- Clear distinction between missing file and no hooks\n- Users understand whether to create file or add hooks\n- Better UX for listInstalledHooks","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-10-25T20:03:16.547518-05:00","updated_at":"2025-10-26T12:56:34.242229-05:00","closed_at":"2025-10-26T12:56:34.242229-05:00","source_repo":".","labels":["ux"]}
{"id":"blues-traveler-48","content_hash":"fe22f508695555372010363fe3ccd1e9b2721694e2c9db65105d42da4a62069c","title":"Standardize error wrapping with %w format","description":"Multiple files use %v instead of %w for error wrapping: hooks_custom.go:38-41, hooks_custom_sync.go, losing error chain context.","design":"Replace %v with %w for errors:\n1. Audit all fmt.Errorf calls\n2. Change %v to %w when wrapping errors\n3. Preserve error chains for debugging","acceptance_criteria":"- All error wrapping uses %w\n- Error chains preserved\n- Better debugging capability","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-10-25T20:03:16.724232-05:00","updated_at":"2025-10-26T17:39:53.083099-05:00","closed_at":"2025-10-26T17:39:53.083099-05:00","source_repo":".","labels":["code-quality"]}
{"id":"blues-traveler-49","content_hash":"51cf2fdc251af061b49de236b035f33f384fc867c15dabd7d97d3a8aad60dfe9","title":"Implement atomic writes for config files","description":"config_xdg.go:300-307 writes directly to config files. Power loss during write can corrupt configs.","design":"Add writeFileAtomic helper:\n1. Write to temp file in same directory\n2. Sync to disk\n3. Rename to target (atomic on POSIX)\n4. Apply to all config writes","acceptance_criteria":"- Config files never partially written\n- Power loss doesn't corrupt configs\n- All config writes use atomic pattern","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-10-25T20:03:16.927993-05:00","updated_at":"2025-10-26T16:40:48.836385-05:00","closed_at":"2025-10-26T16:40:48.836385-05:00","source_repo":".","labels":["reliability"]}
{"id":"blues-traveler-5","content_hash":"c62875deb0bf60750acaeea86360e7fb2bd83b9c50b6beb82cf9cc8bcdae0d72","title":"Clean up duplicate imports","description":"Some files have duplicate imports with different aliases for the same package, making the code less readable.","acceptance_criteria":"- All duplicate imports removed\n- Single consistent import alias used per package\n- Code still compiles and passes tests","status":"closed","priority":1,"issue_type":"chore","assignee":"klauern","created_at":"2025-10-17T11:05:24.315594-05:00","updated_at":"2025-10-25T19:22:18.094909-05:00","closed_at":"2025-10-25T19:22:18.094909-05:00","source_repo":"."}
{"id":"blues-traveler-50","content_hash":"8110010d2f9d60a471a23bea438fd0b6dce8bac0ede802fff97c77999697e0ce","title":"Use tool name constants instead of string literals","description":"audit.go:79-87 uses string literals \"Read\" and \"Glob\" instead of ToolRead/ToolGlob constants, risking drift.","design":"Replace literals with constants:\n1. Use ToolRead instead of \"Read\"\n2. Use ToolGlob instead of \"Glob\"\n3. Apply consistently across all switch statements","acceptance_criteria":"- All tool name references use constants\n- No string literal tool names\n- Consistent with existing ToolBash/ToolEdit/ToolWrite usage","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-10-25T20:03:17.115745-05:00","updated_at":"2025-10-26T12:56:33.819206-05:00","closed_at":"2025-10-26T12:56:33.819206-05:00","source_repo":".","labels":["code-quality"]}
{"id":"blues-traveler-51","content_hash":"b9ff51e57112bfa324a3f7e76fd28ea7a5cb06e4dca85b6b545073b0e44fb167","title":"Optimize regex compilation in xdg.go","description":"xdg.go:91-99 compiles hyphen regex on every call to sanitization function.","design":"Move regex to package level:\n1. Add var hyphenRE = regexp.MustCompile(`-+`) at package level\n2. Use hyphenRE in sanitization function\n3. Compile once at init time","acceptance_criteria":"- Regex compiled once\n- Performance improved for repeated calls\n- No functional changes","status":"open","priority":3,"issue_type":"chore","created_at":"2025-10-25T20:03:17.3998-05:00","updated_at":"2025-10-25T20:03:17.3998-05:00","source_repo":".","labels":["performance"]}
{"id":"blues-traveler-52","content_hash":"629847f51b8be8ad46182f1584481cf6057094c8aa4dae2769c4141f0bb2fd35","title":"Modernize test cleanup patterns","description":"Multiple test files use MkdirTemp + t.Cleanup instead of t.TempDir, and manual env var handling instead of t.Setenv.","design":"Update test patterns:\n1. Replace MkdirTemp + t.Cleanup with t.TempDir\n2. Replace manual os.Setenv + t.Cleanup with t.Setenv\n3. Apply across enhanced_loading_test.go, migration_test.go, xdg_test.go","acceptance_criteria":"- All tests use t.TempDir for temp directories\n- All tests use t.Setenv for environment variables\n- Less boilerplate code\n- Cleanup guaranteed","status":"open","priority":3,"issue_type":"chore","created_at":"2025-10-25T20:03:17.628841-05:00","updated_at":"2025-10-25T20:03:17.628841-05:00","source_repo":".","labels":["testing"]}
{"id":"blues-traveler-53","content_hash":"862cf015a24b0382ccc54db9ea9c70375bfa19a3f187540e74f9b4b6ea147d33","title":"Remove redundant directory creation in custom init","description":"hooks_custom_init.go:104-107 calls MkdirAll for hooks subdir, but config.EnsureClaudeDir() already creates it.","design":"Remove redundant MkdirAll:\n1. Verify EnsureClaudeDir creates .claude/hooks\n2. Remove redundant MkdirAll call\n3. Keep hooksDir variable for filepath.Join","acceptance_criteria":"- No redundant directory creation\n- Hooks directory still created correctly\n- Code cleaner","status":"open","priority":3,"issue_type":"chore","created_at":"2025-10-25T20:03:17.954719-05:00","updated_at":"2025-10-25T20:03:17.954719-05:00","source_repo":".","labels":["cleanup"]}
{"id":"blues-traveler-54","content_hash":"1c017a5cb8a7e78b3e47f8e8502c319ad9780dbdf3a23295969b58e4cf361f85","title":"Implement \"ask\" permission mode for Cursor compatibility","description":"Add support for 3-way permission model (allow/deny/ask) to match Cursor's hook response format. Currently only support binary allow/block.","design":"1. Extend cchooks integration to support Ask() response type\n2. Modify internal/hooks/config_hook.go preHandler/postHandler to handle ask mode\n3. Update response handling to prompt user when ask is returned\n4. Add tests for ask mode behavior","acceptance_criteria":"- Hook can return \"ask\" permission\n- User receives prompt for manual approval\n- Response is properly communicated back to Claude Code\n- Tests cover ask mode scenarios","notes":"Unblocked: PR #8 merged on 2025-10-26. AskWithMessages infrastructure exists, but still need cchooks library to add Ask() support.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-10-25T20:26:06.492972-05:00","updated_at":"2025-10-26T17:36:18.206243-05:00","source_repo":"."}
{"id":"blues-traveler-55","content_hash":"f9721479c013f92e527ad4c304555ac84130531f6e186a6bd82b52ed72da6a2d","title":"Add separate userMessage and agentMessage fields to hook responses","description":"Support Cursor's dual-message format where hooks can provide different messages for users vs the AI agent.","design":"Implementation approach (approved):\n\n1. **Wrapper Layer** - Create Blues Traveler wrappers around cchooks responses\n   - New functions: BlockWithMessages(), PostBlockWithMessages(), etc.\n   - Wrap existing cchooks library without forking\n   - Located in: internal/core/response.go (new file)\n\n2. **Response Struct**\n   ```go\n   type DualMessageResponse struct {\n       UserMessage  string\n       AgentMessage string\n       Permission   string // \"allow\", \"deny\", \"ask\"\n   }\n   ```\n\n3. **Backward Compatibility**\n   - If only one parameter passed, send to both audiences\n   - Existing Block(msg) calls continue to work unchanged\n   - Example: BlockWithMessages(\"error\") -\u003e both user and agent see \"error\"\n\n4. **Integration Points**\n   - Wrap cchooks.Block/Approve/Allow responses\n   - Add metadata to response for dual message routing\n   - Claude Code processes and routes messages to correct audience\n\n5. **API Design**\n   ```go\n   // New dual-message functions\n   BlockWithMessages(userMsg, agentMsg string) PreToolUseResponseInterface\n   PostBlockWithMessages(userMsg, agentMsg string) PostToolUseResponseInterface\n   ApproveWithMessages(userMsg, agentMsg string) PreToolUseResponseInterface  // for \"ask\" mode\n   \n   // Single-param variants (same message to both)\n   BlockWithMessages(msg string) -\u003e BlockWithMessages(msg, msg)\n   ```","acceptance_criteria":"- BlockWithMessages() and PostBlockWithMessages() functions created\n- Wraps cchooks without forking the library\n- Single parameter sends same message to both audiences\n- Dual parameters route correctly to user vs agent\n- Backward compatible with existing Block() calls\n- Tests verify message routing\n- Documentation shows both single and dual-message usage","notes":"Unblocked: PR #8 merged on 2025-10-26. Core infrastructure complete in response.go, now needs Claude Code integration for message routing.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-10-25T20:26:06.630421-05:00","updated_at":"2025-10-26T17:36:17.737159-05:00","source_repo":".","dependencies":[{"issue_id":"blues-traveler-55","depends_on_id":"blues-traveler-61","type":"blocks","created_at":"2025-10-25T20:32:59.27139-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-55","depends_on_id":"blues-traveler-62","type":"blocks","created_at":"2025-10-25T20:32:59.402104-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-55","depends_on_id":"blues-traveler-63","type":"blocks","created_at":"2025-10-25T20:32:59.532383-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-55","depends_on_id":"blues-traveler-64","type":"blocks","created_at":"2025-10-25T20:32:59.668597-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-55","depends_on_id":"blues-traveler-65","type":"blocks","created_at":"2025-10-25T20:32:59.78911-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-55","depends_on_id":"blues-traveler-66","type":"blocks","created_at":"2025-10-25T20:32:59.922411-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-55","depends_on_id":"blues-traveler-67","type":"blocks","created_at":"2025-10-25T20:48:59.156112-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-56","content_hash":"f69ebd68a77bdf5acde5b331c11988caa978e44dacf40f42cc6afee688c328ab","title":"Build Cursor hooks.json to Blues Traveler config adapter","description":"Create converter to translate Cursor's hooks.json format into Blues Traveler settings.json format, including event name mapping.","design":"1. Create parser for Cursor hooks.json schema\n2. Build event mapper: beforeShellExecution â†’ PreToolUse + TOOL_NAME filter\n3. Implement blues-traveler hooks import --from-cursor command\n4. Generate equivalent Blues Traveler configuration\n5. Add validation and error handling","acceptance_criteria":"- Can import valid Cursor hooks.json files\n- Event names properly mapped to Blues Traveler equivalents\n- Generated config works correctly\n- Command has --dry-run option\n- Tests cover common Cursor configurations","notes":"Migration tool, not core parity feature. Users can write cross-compatible hooks directly without conversion. Lower priority than supporting Cursor event names and response formats natively.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-10-25T20:26:06.771929-05:00","updated_at":"2025-10-25T20:29:17.063131-05:00","source_repo":"."}
{"id":"blues-traveler-57","content_hash":"fe77b6d0946ceb5b6deac8e3836941c479193342c897eaf33f5cdf491767ef54","title":"Add Cursor event name aliases to Blues Traveler","description":"Support Cursor event names (beforeShellExecution, afterFileEdit, etc.) as aliases that auto-translate to appropriate Blues Traveler events and filters.","design":"1. Create event alias registry mapping Cursor â†’ Blues Traveler events\n2. Add translation layer in event handling\n3. Support mixed configs with both naming conventions\n4. Document alias mappings in README","acceptance_criteria":"- Cursor event names recognized in config files\n- Auto-translated to correct Blues Traveler events with filters\n- No breaking changes to existing configs\n- Documentation includes mapping table","notes":"CRITICAL for cross-compatibility: Users need to write hooks using Cursor event names that work in both systems. Without this, hooks must be rewritten for each platform.","status":"closed","priority":1,"issue_type":"feature","assignee":"klauern","created_at":"2025-10-25T20:26:06.977274-05:00","updated_at":"2025-10-25T20:42:19.617196-05:00","closed_at":"2025-10-25T20:42:19.617196-05:00","source_repo":"."}
{"id":"blues-traveler-58","content_hash":"b84a7e2b0c20441b0b17b30be9f7d0fb8e96f6b01c5cb0fc008a187d5fef8dac","title":"Add version field to configuration schema","description":"Add \"version\" field to settings.json and hooks config to support future migration and compatibility checks.","design":"1. Add version field to config structs\n2. Implement version-aware config loading\n3. Default to version 1 for existing configs\n4. Add validation for supported versions\n5. Update all config generation to include version","acceptance_criteria":"- All new configs include version: 1\n- Legacy configs without version still load correctly\n- Version validation provides clear errors\n- Tests cover version handling","notes":"Cursor includes version field in hooks.json. Helpful for future compatibility but not blocking cross-platform usage today.","status":"open","priority":3,"issue_type":"chore","created_at":"2025-10-25T20:26:07.14581-05:00","updated_at":"2025-10-25T20:29:10.566714-05:00","source_repo":"."}
{"id":"blues-traveler-59","content_hash":"01f2cfe5b41b74bd3ef77b8e40986ded0a9b3184399a19f085dd5abbccfb4adc","title":"Parse Cursor-style JSON responses from hook scripts","description":"Support hook scripts that output JSON in Cursor format. Currently Blues Traveler only handles exit codes. Need to parse {\"permission\": \"allow|deny|ask\", \"userMessage\": \"...\", \"agentMessage\": \"...\"} and {\"continue\": true|false} responses.","design":"1. Add JSON output parser to hook execution\n2. Detect if script outputs JSON (starts with '{')\n3. Parse Cursor response format\n4. Map to Blues Traveler response types\n5. Fall back to exit code behavior if no JSON\n6. Support both permission-based and flow-control formats","acceptance_criteria":"- Scripts outputting Cursor JSON format work correctly\n- permission: ask triggers user prompt\n- userMessage/agentMessage properly routed\n- Exit code fallback works\n- Both response formats tested\n- Documentation shows examples","notes":"Unblocked: PR #8 merged on 2025-10-26. Ready to implement JSON response parsing.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-10-25T20:29:10.291289-05:00","updated_at":"2025-10-26T17:36:17.303431-05:00","source_repo":".","dependencies":[{"issue_id":"blues-traveler-59","depends_on_id":"blues-traveler-54","type":"blocks","created_at":"2025-10-25T20:29:10.295731-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-59","depends_on_id":"blues-traveler-55","type":"blocks","created_at":"2025-10-25T20:29:10.296589-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-6","content_hash":"9ff7a16a8db26b41ce41969a7d309c949ff111107d8a64c83d965f956d0c22c8","title":"Improve error messages with context and suggestions","description":"Some error messages could be more helpful by adding context about what went wrong and suggestions for how to fix it.","acceptance_criteria":"- Error messages include context about what operation failed\n- Error messages provide suggestions for resolution\n- User-facing errors are clear and actionable","status":"closed","priority":1,"issue_type":"chore","assignee":"klauern","created_at":"2025-10-17T11:05:24.406731-05:00","updated_at":"2025-10-25T19:24:41.030556-05:00","closed_at":"2025-10-25T19:24:41.030556-05:00","source_repo":"."}
{"id":"blues-traveler-60","content_hash":"4756151c4b2ca4a819eee7e2894e8ea52726cfd7d549de443ff986bbd85290df","title":"Document cross-platform hook writing patterns","description":"Create documentation showing how to write hooks that work in both Cursor and Claude Code. Include event name mapping, response format examples, and best practices.","design":"1. Create docs/cursor-compatibility.md\n2. Show event name mapping table\n3. Provide script examples that work in both systems\n4. Document JSON response format\n5. Show configuration examples for both platforms\n6. Add migration guide section to README","acceptance_criteria":"- Documentation covers all cross-platform scenarios\n- Examples work in both Cursor and Claude Code\n- Clear mapping tables provided\n- README links to compatibility guide\n- Testing instructions included","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-25T20:29:10.43685-05:00","updated_at":"2025-10-25T20:29:10.43685-05:00","source_repo":"."}
{"id":"blues-traveler-61","content_hash":"6c26879dd169347417076f51885afc865fc8e21eca3ede152fcb469b40bc40df","title":"Migrate security hook to use dual messages (userMessage/agentMessage)","description":"Update security.go to return separate user-friendly and technical messages. Current messages like \"blocked dangerous command pattern: sudo\" should become userMessage: \"Command blocked for security\" and agentMessage with technical details.","design":"Update security hook response format:\n- userMessage: \"This command was blocked for security reasons.\"\n- agentMessage: \"blocked dangerous command pattern: {pattern} (check_type: {type})\"\n\nExample scenarios:\n- rm -rf /: User sees \"security block\", Agent sees \"blocked rm: targets filesystem root\"\n- sudo commands: User sees \"elevated privileges blocked\", Agent sees full pattern match","acceptance_criteria":"- Security hook returns dual messages for all block scenarios\n- User sees friendly explanation\n- Agent sees technical pattern details\n- Tests verify both message types","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T20:32:48.536434-05:00","updated_at":"2025-10-26T16:12:36.947344-05:00","closed_at":"2025-10-26T16:12:36.947344-05:00","source_repo":"."}
{"id":"blues-traveler-62","content_hash":"82f20747eadc6cd8ab501a1646ad2c98a95d1b0d5bf02f64837f19abcda6ba66","title":"Migrate find-blocker hook to use dual messages","description":"Update find_blocker.go to provide concise user message and detailed fd command suggestions for agent. Current multi-line suggestions should go to agentMessage only.","design":"Split current suggestion messages:\n- userMessage: \"The 'find' command was blocked. Consider using 'fd' instead.\"\n- agentMessage: Full multi-line suggestion with examples and command patterns\n\nLocation: internal/hooks/find_blocker.go:73","acceptance_criteria":"- User sees short recommendation to use fd\n- Agent sees full command examples and migration patterns\n- generateFdSuggestion returns both message types\n- Tests cover message separation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T20:32:48.687266-05:00","updated_at":"2025-10-26T16:12:38.224412-05:00","closed_at":"2025-10-26T16:12:38.224412-05:00","source_repo":"."}
{"id":"blues-traveler-63","content_hash":"7aaa66b0a640771d687b01357fa7f0f54748b71f4b46e02d898cf1d70845873a","title":"Migrate fetch-blocker hook to use dual messages","description":"Update fetch_blocker.go to provide simple user message about authentication while giving agent the URL prefix details and alternative suggestions.","design":"Message format:\n- userMessage: \"This URL requires authentication.\"\n- agentMessage: \"URL prefix blocked: {prefix}. Suggestion: {alternative_command}\"\n\nLocation: internal/hooks/fetch_blocker.go:99-105","acceptance_criteria":"- User sees authentication message\n- Agent sees blocked prefix and gh/curl alternatives\n- Both embedded config and file-based prefixes supported\n- Tests verify dual message format","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T20:32:48.833325-05:00","updated_at":"2025-10-26T16:12:39.547264-05:00","closed_at":"2025-10-26T16:12:39.547264-05:00","source_repo":"."}
{"id":"blues-traveler-64","content_hash":"38743906a26d70962cbe49ad801d9f80f48367b0fd05060c4b30cb2f41cc96bb","title":"Migrate format hook to use dual messages","description":"Update format.go to show simple formatting failure to user while providing technical error details to agent.","design":"Message format:\n- userMessage: \"Code formatting failed for {filename}\"\n- agentMessage: \"Formatting failed for {filename}: {formatter} error: {details}\"\n\nLocation: internal/hooks/format.go:66","acceptance_criteria":"- User sees file name and simple error\n- Agent sees formatter output, exit codes, error text\n- All formatters (gofmt, prettier, black) updated\n- Tests verify error propagation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T20:32:48.981779-05:00","updated_at":"2025-10-26T16:12:40.879124-05:00","closed_at":"2025-10-26T16:12:40.879124-05:00","source_repo":"."}
{"id":"blues-traveler-65","content_hash":"8a3119d16d2bfb2a0b0062b59c9a8632af125897f295a53e415f059f64794892","title":"Migrate vet hook to use dual messages","description":"Update vet.go to show simple code quality failure to user while providing detailed type checking errors to agent.","design":"Message format:\n- userMessage: \"Code quality check failed for {filename}\"\n- agentMessage: \"Vetting failed for {filename}: {detailed_error}\"\n\nLocation: internal/hooks/vet.go:52","acceptance_criteria":"- User sees simple quality check failure\n- Agent sees type errors, undefined references, etc.\n- Tests verify error details preserved for agent","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T20:32:49.130476-05:00","updated_at":"2025-10-26T16:12:42.010108-05:00","closed_at":"2025-10-26T16:12:42.010108-05:00","source_repo":"."}
{"id":"blues-traveler-66","content_hash":"24bb50d5054f01c24de402cef0be50f015549ee7541700d085c43712ce9d3016","title":"Migrate config_hook to use dual messages","description":"Update config_hook.go to provide simple hook failure message to user while giving agent full command output and exit codes.","design":"Message format:\n- userMessage: \"Hook '{job_name}' failed\"\n- agentMessage: \"job '{job_name}' failed: exit status {code}, stderr: {output}\"\n\nLocations:\n- internal/hooks/config_hook.go:136 (PreToolUse)\n- internal/hooks/config_hook.go:152 (PostToolUse)","acceptance_criteria":"- User sees job name only\n- Agent sees full error details, stderr, exit codes\n- Timeout messages handled separately\n- Tests verify custom hook error handling","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T20:32:49.275998-05:00","updated_at":"2025-10-26T16:12:43.050382-05:00","closed_at":"2025-10-26T16:12:43.050382-05:00","source_repo":"."}
{"id":"blues-traveler-67","content_hash":"74847aef666e2dc1e1dc9708cf7ac6dc3735410aa05a753444e3d25944a32ad5","title":"Design dual-message response wrapper API","description":"Create the wrapper layer design for dual-message responses that wraps cchooks library. Define interfaces, structs, and function signatures before implementation.","design":"Create design document covering:\n\n1. Response wrapper struct layout\n2. Function signatures for BlockWithMessages, PostBlockWithMessages, ApproveWithMessages\n3. How wrappers integrate with cchooks responses\n4. Message routing mechanism (metadata in response?)\n5. Variadic function design for 1 or 2 parameters\n6. Integration with Claude Code's message display\n\nFile: docs/design/dual-message-responses.md\n\nKey decisions:\n- Wrapper approach (not fork)\n- Single param = both audiences\n- Naming: *WithMessages() pattern","acceptance_criteria":"- Design doc covers all wrapper functions\n- Struct layouts defined\n- Integration approach with cchooks documented\n- Variadic parameter handling specified\n- Examples for each message pattern\n- Approved before implementation starts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T20:48:58.810049-05:00","updated_at":"2025-10-26T15:45:16.648227-05:00","closed_at":"2025-10-26T15:45:16.648227-05:00","source_repo":".","dependencies":[{"issue_id":"blues-traveler-67","depends_on_id":"blues-traveler-68","type":"blocks","created_at":"2025-10-25T20:48:59.2951-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-68","content_hash":"23b249b4152891ce764467fe5f79e5d55457b46c2080cbd1c866030a906be749","title":"Implement core dual-message response wrappers","description":"Create internal/core/response.go with dual-message wrapper functions that wrap cchooks library responses. Implement BlockWithMessages, PostBlockWithMessages, and supporting infrastructure.","design":"Implementation in internal/core/response.go:\n\n```go\n// DualMessageResponse wraps cchooks responses with dual messages\ntype DualMessageResponse struct {\n    UserMessage  string\n    AgentMessage string\n    underlying   cchooks.PreToolUseResponseInterface // or PostToolUseResponseInterface\n}\n\n// BlockWithMessages creates a blocking response with dual messages\n// If only userMsg provided, same message goes to both audiences\nfunc BlockWithMessages(userMsg string, agentMsg ...string) cchooks.PreToolUseResponseInterface\n\n// PostBlockWithMessages for PostToolUse events\nfunc PostBlockWithMessages(userMsg string, agentMsg ...string) cchooks.PostToolUseResponseInterface\n\n// ApproveWithMessages for \"ask\" mode support\nfunc ApproveWithMessages(userMsg string, agentMsg ...string) cchooks.PreToolUseResponseInterface\n```\n\nHandle variadic params: if len(agentMsg) == 0, use userMsg for both","acceptance_criteria":"- internal/core/response.go created\n- BlockWithMessages() implemented with variadic params\n- PostBlockWithMessages() implemented\n- ApproveWithMessages() for ask mode\n- Single param sends to both audiences\n- Wraps cchooks responses correctly\n- Unit tests verify all parameter combinations\n- No changes to cchooks library needed","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T20:48:58.962727-05:00","updated_at":"2025-10-26T16:12:36.037588-05:00","closed_at":"2025-10-26T16:12:36.037588-05:00","source_repo":"."}
{"id":"blues-traveler-69","content_hash":"631393cff9c7fd57f75b267e99bc0349fe739bf1e6eef34772f417fa62b996b3","title":"Reduce cognitive complexity in NewConfigEditCmd (38 \u003e 20)","description":"Function NewConfigEditCmd in internal/cmd/config_xdg.go:206 has cognitive complexity of 38, exceeding threshold of 20.\n\nThe function handles:\n- Flag parsing (global, project, editor)\n- Config path determination (global vs project)\n- Config file creation if missing\n- Editor selection (flag, $EDITOR env, common editors)\n- Editor launch\n\nComplexity comes from nested conditionals and multiple responsibility paths.","design":"Refactor approach:\n1. Extract config path determination into helper function (determineConfigPath)\n2. Extract editor selection logic into helper function (selectEditor)\n3. Extract config file initialization into helper function (ensureConfigExists)\n4. Keep main function as orchestration only\n\nExample structure:\n```go\nfunc NewConfigEditCmd() *cli.Command {\n    return \u0026cli.Command{\n        // ... flags ...\n        Action: func(ctx context.Context, cmd *cli.Command) error {\n            configPath, err := determineConfigPath(cmd)\n            if err != nil {\n                return err\n            }\n            \n            editor, err := selectEditor(cmd.String(\"editor\"))\n            if err != nil {\n                return err\n            }\n            \n            return launchEditor(editor, configPath)\n        },\n    }\n}\n```","acceptance_criteria":"- NewConfigEditCmd complexity reduced below 20\n- Helper functions extracted with single responsibilities\n- All existing functionality preserved\n- Tests verify config editing works correctly\n- No functional changes to user experience","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-25T21:00:18.426398-05:00","updated_at":"2025-10-25T21:04:25.984952-05:00","closed_at":"2025-10-25T21:04:25.984952-05:00","source_repo":".","labels":["complexity","gocognit","refactor"]}
{"id":"blues-traveler-7","content_hash":"88da0e6b6fff11c75aa407d73d513a032982c4fc391e2465012be6a4dce112b0","title":"Enable performance hook when properly integrated","description":"Performance hook exists but is commented out in init.go. Need to properly integrate and enable the performance monitoring hook.","design":"Review performance.go implementation, ensure it's properly integrated with the hook system, add tests if missing, and uncomment the registration in init.go. If performance.go doesn't exist, create it with basic performance monitoring capabilities (timing, resource usage, etc.).","acceptance_criteria":"- Performance hook implementation reviewed or created\n- Tests added for performance hook\n- Hook properly registered in init.go\n- Documentation updated with performance hook usage","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-17T11:05:44.288079-05:00","updated_at":"2025-10-17T11:05:44.288079-05:00","source_repo":"."}
{"id":"blues-traveler-70","content_hash":"35323045d31b43585eb72ec08b6a67f9aaa018b6240476990526ea8b35c0a6d6","title":"Fix path traversal vulnerability in custom init --name flag","description":"hooks_custom_init.go:114 allows path traversal via --name flag. User can provide '../../../etc/passwd' or absolute paths to escape .claude/hooks directory.\n\nSecurity Impact: Path traversal vulnerability allowing arbitrary file writes.\n\nFix: Sanitize --name input:\n1. Use filepath.Base to strip any directory components\n2. Reject if filepath.IsAbs(fileName)\n3. Reject if contains os.PathSeparator after Base()\n4. Reject if empty or '.' or '..'\n5. Then ensure .yml/.yaml extension\n\nReference: hooks_custom_init.go:114 (CodeRabbit Critical)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:24:35.713953-05:00","updated_at":"2025-10-25T21:34:19.300443-05:00","closed_at":"2025-10-25T21:34:19.300443-05:00","source_repo":"."}
{"id":"blues-traveler-71","content_hash":"4a61828b2d324e5fd743135d49948776848b488df0024b8361bd44ac537037ee","title":"Add event validation to sync command to prevent data loss","description":"hooks_custom_sync.go:28 parseSyncOptions accepts any --event value without validation. RemoveConfigGroupFromSettings defaults to removing across ALL events when given invalid event name, causing data loss.\n\nImpact: Typo in --event causes unintended hook removal across all events.\n\nFix:\n1. Add event validation to parseSyncOptions (match install command pattern)\n2. Pass isValidEventType and validEventTypes to newHooksCustomSyncCommand\n3. Validate event filter before use\n4. Return error for invalid event names\n\nReference: hooks_custom_sync.go:28 (CodeRabbit Critical), install command has validation at lines 80-83","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:24:43.257597-05:00","updated_at":"2025-10-25T21:33:57.592558-05:00","closed_at":"2025-10-25T21:33:57.592558-05:00","source_repo":".","dependencies":[{"issue_id":"blues-traveler-71","depends_on_id":"blues-traveler-74","type":"blocks","created_at":"2025-10-25T21:25:14.091803-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-716","content_hash":"009830b0e76b3cbf6df2ff33c05518548580816b21d72edb4a7aec89ddbb02fa","title":"Reduce function length in core/events.go","description":"Function exceeds funlen threshold:\n\ninternal/core/events.go:29 - AllClaudeCodeEvents (65 lines, max 60)\n\nThis function returns a slice of all Claude Code event definitions. Consider:\n1. Using a sync.Once initialized package variable instead of a function\n2. Splitting into separate functions for each event category\n3. Using code generation for event definitions","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-07T20:52:39.68945-06:00","updated_at":"2025-11-07T20:52:39.68945-06:00","source_repo":"."}
{"id":"blues-traveler-72","content_hash":"7e0ffed5e9ef427d7a591c04abad1a36192f219477116529164e7fccccfeb003","title":"Fix nonexistent filepath.HasPrefix calls in doctor tests","description":"hooks_doctor_test.go:12,195-203 uses filepath.HasPrefix which doesn't exist in Go stdlib. Tests won't compile.\n\nImpact: Tests fail to compile, breaking CI.\n\nFix:\n1. Import 'strings' package\n2. Replace filepath.HasPrefix with proper check:\n   - Use strings.HasPrefix after cleaning paths\n   - Or use filepath.Rel and check for '..' prefix\n3. Ensure paths compared are cleaned/normalized\n\nReference: hooks_doctor_test.go:12, 195-203 (CodeRabbit Critical)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:24:49.913522-05:00","updated_at":"2025-10-25T21:32:40.935741-05:00","closed_at":"2025-10-25T21:32:40.935741-05:00","source_repo":"."}
{"id":"blues-traveler-73","content_hash":"ea6bc8b82181ada5a737bfc8de9e02085a6ddd5f54622e20219269b23264e612","title":"Fix uninstall to remove hooks by type, not exact command","description":"hooks_install.go:304 uninstall uses exact string match on hook commands. Fails when:\n- Hooks installed with --log or --format flags\n- Executable path changed since installation\n- Any additional flags were used\n\nImpact: Users cannot uninstall hooks if command changed.\n\nFix:\n1. Create removeHookTypeFromSettings helper\n2. Match by pattern: 'hooks run \u003ctype\u003e' (ignoring flags/path)\n3. Use suffix matching or prefix matching with tolerance\n4. Remove from ALL events where pattern matches\n5. Still return error if no matches found\n\nReference: hooks_install.go:304 (CodeRabbit Critical)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:24:58.048649-05:00","updated_at":"2025-10-25T21:33:28.442341-05:00","closed_at":"2025-10-25T21:33:28.442341-05:00","source_repo":"."}
{"id":"blues-traveler-74","content_hash":"7acc5314cf91c3bdeb18e86a49aebf342050bce051a0fd7f226b4b2dc68f5c6c","title":"Pass event validators to sync command","description":"hooks_custom.go:28 creates sync command without event validators, but sync needs them to validate --event flag (see blues-traveler-71).\n\nFix:\n1. Update newHooksCustomSyncCommand to accept isValidEventType and validEventTypes parameters\n2. Pass these from hooks_custom.go:28 (same as install command)\n3. Thread validators through to parseSyncOptions\n\nDepends on: blues-traveler-71\n\nReference: hooks_custom.go:28 (CodeRabbit Major)","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-10-25T21:25:04.967232-05:00","updated_at":"2025-10-26T12:56:31.687401-05:00","closed_at":"2025-10-26T12:56:31.687401-05:00","source_repo":"."}
{"id":"blues-traveler-75","content_hash":"cd5a47a13c3c8f64f2061cba9daa760e24dd4f3cba1a7e291b7c38611cd316cc","title":"Fix HTML entity double-encoding in issues.jsonl","description":".beads/issues.jsonl contains double-encoded HTML entities:\n- \\u0026gt; should be \u003e\n- \\u0026lt; should be \u003c\n\nAffected lines: 2, 5-11, 25-29, 31-40, 51-66, 69\n\nImpact: Reduced readability, potential display issues.\n\nFix:\n1. Use html.UnescapeString() when reading/writing issues\n2. Or find/replace in file: \\u0026gt; â†’ \u003e and \\u0026lt; â†’ \u003c\n3. Ensure JSON remains valid\n\nReference: .beads/issues.jsonl:2 (CodeRabbit Minor)","status":"open","priority":3,"issue_type":"bug","created_at":"2025-10-25T21:25:21.367112-05:00","updated_at":"2025-10-25T21:25:21.367112-05:00","source_repo":"."}
{"id":"blues-traveler-76","content_hash":"9bbe27d32b2d3ee493f5a7b832eeb6b0a7bae250d4d8f1b8755d1434f99d4be3","title":"Complete or remove TestParseInstallFlags placeholder","description":"hooks_install_test.go:132 TestParseInstallFlags is an empty placeholder that always passes, providing false confidence.\n\nOptions:\n1. Implement real table-driven tests with assertions\n2. Remove test if out of scope\n\nIf implementing:\n- Test flag parsing with mock cli.Context\n- Assert installFlags.LogFormat values\n- Test default behavior (empty â†’ 'jsonl')\n- Test valid values ('jsonl', 'pretty')\n- Test error cases\n\nReference: hooks_install_test.go:132 (CodeRabbit Minor)","status":"open","priority":3,"issue_type":"chore","created_at":"2025-10-25T21:25:28.896406-05:00","updated_at":"2025-10-25T21:25:28.896406-05:00","source_repo":"."}
{"id":"blues-traveler-77","content_hash":"7922dd11dacc6868fc85c38c69d7e91fcb3ed48fe3ba6bbb9779d49ce39b3022","title":"Fix macOS security regex case sensitivity issues","description":"internal/hooks/security.go:149-168 runs regexes against cmdLower (lowercased) but patterns contain mixed/uppercase chars (e.g., TCC\\\\.db), causing false negatives.\n\nImpact: Security checks fail to catch dangerous macOS commands.\n\nFix:\n1. Lowercase all regex patterns, or\n2. Use case-insensitive matching ((?i) flag), or\n3. Match against original cmd instead of cmdLower\n\nExamples needing fixes:\n- TCC\\\\.db â†’ tcc\\\\.db\n- SystemVersion\\\\.plist â†’ systemversion\\\\.plist\n\nReference: security.go:149-168 (CodeRabbit - outside diff)","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-10-25T21:25:36.586117-05:00","updated_at":"2025-10-26T16:40:49.345287-05:00","closed_at":"2025-10-26T16:40:49.345287-05:00","source_repo":"."}
{"id":"blues-traveler-78","content_hash":"6f87e635d891eb4a78c0fad544ce8384637937f7ee27dc359bbb46fc665cfbd4","title":"Allow explicit --compress=false flag in config edit","description":"config_xdg.go:548-552 only sets compress=true when flag present. Users cannot explicitly turn compression off.\n\nCurrent: if compress { logConfig.Compress = compress }\nIssue: Can't detect if user explicitly said --compress=false\n\nFix:\nUse cmd.IsSet(\"compress\") to detect flag presence:\nif cmd.IsSet(\"compress\") {\n  logConfig.LogRotation.Compress = compress\n}\n\nReference: config_xdg.go:548-552 (CodeRabbit - outside diff)","status":"open","priority":3,"issue_type":"feature","created_at":"2025-10-25T21:25:42.752097-05:00","updated_at":"2025-10-25T21:25:42.752097-05:00","source_repo":"."}
{"id":"blues-traveler-79","content_hash":"e05374bd55ccc0b0d185d9436ba4c5e73087f789a8d33d07f6d5a99696ffd81d","title":"Fix nil-logger panic and resource leaks in debug hook","description":"internal/hooks/debug.go:71-92 has multiple issues:\n1. h.logger may be nil â†’ panic when case blocks call h.logger.Printf\n2. Doesn't create .claude/hooks directory before OpenFile\n3. Never closes log file â†’ descriptor leak\n4. Message says 'blues-traveler.log' but path is '.claude/hooks/debug.log'\n5. Should use ToolRead/ToolGlob constants not string literals\n\nFix:\n1. Add logf() helper that guards against nil logger\n2. Create directory with os.MkdirAll before OpenFile\n3. Add defer to close logFile in Run()\n4. Fix message to reference correct path\n5. Use constants for tool names in switch\n\nAlso flagged by: github-advanced-security (unhandled errors)\n\nReference: debug.go:71-92, 42-53, 26-40, 73-87, 92-105 (CodeRabbit - outside diff)","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-10-25T21:25:52.08543-05:00","updated_at":"2025-10-26T12:56:31.261207-05:00","closed_at":"2025-10-26T12:56:31.261207-05:00","source_repo":"."}
{"id":"blues-traveler-8","content_hash":"3f06cf07cc4ad59caa29366854c3986d2d386a4974768775070d7c2438683877","title":"Code Complexity Reduction Initiative","description":"Address 171 complexity issues identified in golangci-lint audit. Focus on reducing cognitive complexity, improving maintainability, and establishing quality gates.","acceptance_criteria":"All priority 1-2 tasks completed, CI pipeline with golangci-lint running, complexity metrics showing improvement","status":"closed","priority":1,"issue_type":"epic","assignee":"klauern","created_at":"2025-10-25T16:34:05.245877-05:00","updated_at":"2025-10-26T13:08:59.040011-05:00","closed_at":"2025-10-26T13:08:59.040011-05:00","source_repo":"."}
{"id":"blues-traveler-80","content_hash":"afb274b65ed7f697b7602a26e8e0e47c1e44896a15145cc6549509c94c04f6ce","title":"Update help text to reflect XDG config path","description":"config_xdg.go:470-471 help text says '(~/.claude/settings.json)' but config is XDG-backed, actual path is '~/.config/blues-traveler/global.json'.\n\nImpact: Misleading documentation.\n\nFix:\nUpdate usage string to either:\n- Show correct XDG path: '(~/.config/blues-traveler/global.json)'\n- Or omit path to avoid drift\n\nReference: config_xdg.go:470-471 (CodeRabbit - outside diff)","status":"open","priority":3,"issue_type":"chore","created_at":"2025-10-25T21:25:59.934329-05:00","updated_at":"2025-10-25T21:25:59.934329-05:00","source_repo":"."}
{"id":"blues-traveler-81","content_hash":"73ca6cd6eb30d8bff703cdfd951d466d65478c09ba1743b3d9787e7fe5516006","title":"Fix deferred file Close errors in debug.go","description":"In internal/hooks/debug.go around lines 37-41, the deferred file Close calls ignore returned errors and logging actions are executed regardless of LoggingEnabled. Update the defer blocks to capture and handle the error returned by h.logFile.Close(), logging it via h.logger (or stderr if logger is nil) only when h.LoggingEnabled is true.","acceptance_criteria":"- Defer block captures Close() error\n- Error is logged only when LoggingEnabled is true\n- Critical errors are propagated appropriately","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:33.390781-05:00","updated_at":"2025-10-25T21:53:24.27816-05:00","closed_at":"2025-10-25T21:53:24.27816-05:00","source_repo":"."}
{"id":"blues-traveler-82","content_hash":"f80c943c461968462da6108bee6f72d4e19d63dc25c5098424d9ef82f5c4cb71","title":"Fix Windows path handling in extractConfigGroupName","description":"In internal/config/settings.go around lines 658-671, the current logic splits the entire command on \":\" which breaks on Windows paths (e.g., \"C:\\...\"). Instead find the substring starting at the occurrence of \"config:\" and parse only from there â€” locate the index of \"config:\", take the substring from that index+len(\"config:\") onward, then split that substring on \":\".","acceptance_criteria":"- Windows paths like \"C:\\...\" work correctly\n- Config group name is extracted properly\n- Existing test cases still pass","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:33.549681-05:00","updated_at":"2025-10-25T21:53:24.280224-05:00","closed_at":"2025-10-25T21:53:24.280224-05:00","source_repo":"."}
{"id":"blues-traveler-83","content_hash":"1ccc7a61578738612aaea7b7095e3601c2a2ab16f5ef3da814e4c3d1119560a0","title":"Add SessionEnd hook removal to RemoveHookTypeFromSettings","description":"In internal/config/settings.go around lines 346-362, RemoveHookTypeFromSettings currently removes many hook categories but omits SessionEnd, so SessionEnd hooks are not uninstalled by type-based removal. Add a call to removeHookTypeFromMatchers for settings.Hooks.SessionEnd passing hookType and \u0026removed, consistent with the other hook fields.","acceptance_criteria":"- SessionEnd hooks are removed when uninstalling by type\n- Returned removed flag reflects SessionEnd deletions\n- All hook types are handled consistently","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:33.710868-05:00","updated_at":"2025-10-25T21:53:24.281136-05:00","closed_at":"2025-10-25T21:53:24.281136-05:00","source_repo":"."}
{"id":"blues-traveler-84","content_hash":"bb8582aaca489dfb3ecc2f2c93d1113c109bda65d79e032ff21953d20cb2fc90","title":"Fix duplicate canonical files in collectPerGroupFiles","description":"In internal/config/hooks_config.go around lines 50-76, collectPerGroupFiles currently returns all discovered files including the canonical hooks.yml/hooks.yaml that you also add explicitly, causing duplicate processing. Update the function to skip filenames that match the canonical names (hooks.yml and hooks.yaml) when building the names list, preserving sorted order.","acceptance_criteria":"- hooks.yml and hooks.yaml are not duplicated\n- Sorted order is preserved\n- Other per-group files are still included","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:33.874362-05:00","updated_at":"2025-10-25T21:53:24.281964-05:00","closed_at":"2025-10-25T21:53:24.281964-05:00","source_repo":"."}
{"id":"blues-traveler-85","content_hash":"0f43e1043aa605c09e23c6f58466b3042c705afb44f0755a49c954ad5a67cc69","title":"Implement or remove TestParseInstallFlags placeholder","description":"In internal/cmd/hooks_install_test.go lines 100-132, the TestParseInstallFlags body is a no-op placeholder that always passes. Either implement real assertions or remove the test. Replace with concrete table-driven tests that for each case construct a minimal cli.Context/cli.Command, set the --log-format argument, call the actual parse function, and assert the returned installFlags.LogFormat equals \"jsonl\" or \"pretty\".","acceptance_criteria":"- Test has real assertions or is removed\n- If implemented, covers valid values and defaults\n- Tests fail on mismatch","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-25T21:43:34.034263-05:00","updated_at":"2025-10-25T21:53:24.282943-05:00","closed_at":"2025-10-25T21:53:24.282943-05:00","source_repo":"."}
{"id":"blues-traveler-86","content_hash":"213658a4c25f268856646958d821baedefd118fc8a955e3606c66b7124614fec","title":"Unescape double-encoded HTML entities in issues.jsonl","description":".beads/issues.jsonl around line 2: several issue fields contain double-encoded HTML entities like \"\\u0026gt;\" and \"\\u0026lt;\" that should be \"\u003e\" and \"\u003c\". Fix by unescaping these strings when loading/saving the JSON (e.g., call html.UnescapeString on title and description in Go) or perform a safe find/replace to convert \"\\u0026gt;\" â†’ \"\u003e\" and \"\\u0026lt;\" â†’ \"\u003c\" for all affected entries.","acceptance_criteria":"- HTML entities are properly unescaped\n- JSON remains valid\n- Tests/consumers parse correctly","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:34.206977-05:00","updated_at":"2025-10-26T16:29:48.160864-05:00","closed_at":"2025-10-26T16:29:48.160864-05:00","source_repo":"."}
{"id":"blues-traveler-87","content_hash":"2d5a04cce3ef4d8f2e3d8a24871b80bbe4644c86d615777161ef034c97215932","title":"Fix YAML/JSON error message to JSON-only in hooks_install.go","description":"In internal/cmd/hooks_install.go around lines 120-123 (and similarly lines 236-239), the error message references \"YAML/JSON\" but the settings file is JSON-only. Update the error text to mention JSON only (e.g., \"Verify the settings file format is valid JSON\") and remove YAML from the suggestion so the message accurately reflects the supported format.","acceptance_criteria":"- Error messages reference JSON only\n- No mention of YAML support\n- Both occurrences are updated","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:34.381861-05:00","updated_at":"2025-10-25T21:53:24.283718-05:00","closed_at":"2025-10-25T21:53:24.283718-05:00","source_repo":"."}
{"id":"blues-traveler-88","content_hash":"2f0283cda4b61cd70509c594ba46c02b7f1bd93286868685941d779af47a535e","title":"Enumerate all hook files in getCandidateConfigPaths","description":"In internal/cmd/hooks_doctor.go around lines 331-367, getCandidateConfigPaths currently lists specific hook filenames but doesn't enumerate all files in the .claude/hooks directory, causing false negatives. Update the function to append any files matching .claude/hooks/*.yml and .claude/hooks/*.yaml for both the project (cwd) and global (home) scopes using filepath.Glob, preserving the existing order and error handling.","acceptance_criteria":"- All *.yml and *.yaml files in .claude/hooks are discovered\n- Works for both project and global scopes\n- Existing order is preserved","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:34.559205-05:00","updated_at":"2025-10-25T21:53:24.284546-05:00","closed_at":"2025-10-25T21:53:24.284546-05:00","source_repo":"."}
{"id":"blues-traveler-89","content_hash":"2e670be149738b3dda2cc488a3b5c5acf1b21a6c21e03f081c94484fe783a4bb","title":"Fix scope detection to use globalPrefix in hooks_doctor.go","description":"In internal/cmd/hooks_doctor.go around lines 168-176, the scope detection currently uses the user's home directory prefix which mislabels project files located under the home dir as \"global\". Instead compute the specific global config prefix (e.g., globalPrefix := filepath.Join(home, \".claude\")) and mark a file as global only if it equals or has that prefix using strings.HasPrefix(f, globalPrefix).","acceptance_criteria":"- Only files in ~/.claude are marked as global\n- Project files under home directory are correctly labeled\n- Uses filepath.Join and strings.HasPrefix","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:34.725868-05:00","updated_at":"2025-10-25T21:53:24.293377-05:00","closed_at":"2025-10-25T21:53:24.293377-05:00","source_repo":"."}
{"id":"blues-traveler-8j2","content_hash":"ba82435035bca43c487318390d9a9fa891eaa110183b260e0b8e345e49cd72aa","title":"Reduce cyclomatic complexity in cmd package","description":"Several command functions exceed the cyclop threshold (max 10):\n\ninternal/cmd/config_xdg.go:103 - NewConfigListCmd (11)\ninternal/cmd/config_xdg.go:348 - NewConfigCleanCmd (11)\ninternal/cmd/config_xdg.go:421 - NewConfigStatusCmd (12)\ninternal/cmd/config_xdg.go:500 - NewConfigLogCmd (12)\ninternal/cmd/hooks_install.go:99 - installHookAction (14)\ninternal/cmd/hooks_install.go:400 - uninstallAllKlauerHooks (12)\n\nThese CLI command builders need refactoring to extract validation and action logic into helper functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T20:51:18.384743-06:00","updated_at":"2025-11-07T20:51:18.384743-06:00","source_repo":"."}
{"id":"blues-traveler-9","content_hash":"eaa7b5751823ded7be0701e1f907b8066cda56ff1fe7140c8c011ae7251fbdf5","title":"Refactor hooks.go into multiple files","description":"Break up internal/cmd/hooks.go (1,512 lines) into 5-7 smaller files by concern:\n- hooks_install.go - Installation logic\n- hooks_sync.go - Sync operations  \n- hooks_custom.go - Custom hook management\n- hooks_blocked.go - Blocked URL management\n- hooks_init.go - Initialization logic\n\nThis file contains functions with cognitive complexity up to 103 (target: \u0026lt;30)","design":"Extract functions by their primary responsibility. Maintain backward compatibility through package-internal interfaces if needed.","acceptance_criteria":"- hooks.go split into 5-7 files of ~200-300 lines each\n- All tests passing\n- No exported API changes","status":"closed","priority":1,"issue_type":"task","assignee":"klauern","created_at":"2025-10-25T16:34:05.404539-05:00","updated_at":"2025-10-25T17:28:42.283636-05:00","closed_at":"2025-10-25T17:28:42.283636-05:00","source_repo":".","labels":["high-roi","priority-1","refactoring"],"dependencies":[{"issue_id":"blues-traveler-9","depends_on_id":"blues-traveler-10","type":"blocks","created_at":"2025-10-25T16:36:58.468556-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-9","depends_on_id":"blues-traveler-17","type":"related","created_at":"2025-10-25T16:36:58.60338-05:00","created_by":"daemon"},{"issue_id":"blues-traveler-9","depends_on_id":"blues-traveler-8","type":"parent-child","created_at":"2025-10-25T16:37:15.46012-05:00","created_by":"daemon"}]}
{"id":"blues-traveler-90","content_hash":"c450f5114ed634afe48573a88dfa02b1809a0159938730441286e2d0c61f9524","title":"Check file existence before LoadSettings in hooks_doctor.go","description":"In internal/cmd/hooks_doctor.go around lines 76-95, change the logic to check the settings file existence before calling config.LoadSettings because LoadSettings returns empty settings when the file is missing and masks os.IsNotExist. Use os.Stat on settingsPath and if it returns an IsNotExist error print the \"No project settings file found\" messages and return, otherwise call config.LoadSettings. Apply the identical pattern to checkGlobalSettings.","acceptance_criteria":"- Missing files are detected accurately\n- Error messages are displayed correctly\n- Both checkSettings and checkGlobalSettings use the pattern","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:34.898513-05:00","updated_at":"2025-10-25T21:53:24.294324-05:00","closed_at":"2025-10-25T21:53:24.294324-05:00","source_repo":"."}
{"id":"blues-traveler-91","content_hash":"ad6f6f5c57d565f6eea5bc0a590ef7caf767c20efea118274620c47caa18874a","title":"Wire --init flag to loadOrCreateGroup in hooks_custom_install.go","description":"In internal/cmd/hooks_custom_install.go around lines 24-26 (also update similar blocks at 38-46 and 96-104), the --init BoolFlag is declared but never used because loadOrCreateGroup is always called with false. Change the call sites to read the flag from the cli context (e.g. c.Bool(\"init\")) and pass that boolean into loadOrCreateGroup so the flag actually triggers creation of a sample group stub.","acceptance_criteria":"- --init flag is read from context\n- Flag value is passed to loadOrCreateGroup\n- Sample group stub is created when flag is set","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:35.075663-05:00","updated_at":"2025-10-25T21:53:24.295323-05:00","closed_at":"2025-10-25T21:53:24.295323-05:00","source_repo":"."}
{"id":"blues-traveler-92","content_hash":"6d76ac2857f12d7a2298a5a8aa6648b3e46d07cf32a13d882a5137af6a7efdd6","title":"Fix JSON/TOML error message to JSON-only in config_xdg.go","description":"In internal/cmd/config_xdg.go around lines 519-522, the error message incorrectly suggests the config supports \"JSON/TOML\" while LoadLogConfig only parses JSON. Update the error hint to reference only \"valid JSON\" (e.g., replace \"valid JSON/TOML format\" with \"valid JSON format\") so the message accurately reflects supported formats.","acceptance_criteria":"- Error message references JSON only\n- No mention of TOML support\n- Message accurately reflects LoadLogConfig behavior","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-10-25T21:43:35.248606-05:00","updated_at":"2025-10-25T21:53:24.29614-05:00","closed_at":"2025-10-25T21:53:24.29614-05:00","source_repo":"."}
{"id":"blues-traveler-93","content_hash":"dd2159bdd1c17bd186a96a4e256471e7c17059c8bfe5c803dde4b076c8dedb76","title":"Extract repeated strings as constants (goconst)","description":"Fix 8 goconst linter issues by extracting repeated string literals as constants:\n\nCurrently flagged:\n- \"windows\" (7 occurrences in config_sync_test.go) \n- \"project\" / \"global\" (9 occurrences each in hooks_install.go) - constants exist (ScopeProject, ScopeGlobal) but not used everywhere\n- \"xdg\" (3 occurrences in enhanced_loading_test.go)\n- \"/Users/user/dev/project\" (4 occurrences in xdg_test.go)\n- \"json\" (3 occurrences in xdg_test.go) - constant FormatJSON exists but not used\n- \"Bash\", \"Edit\", \"Write\" in hooks files - constants ToolBash, ToolEdit, ToolWrite exist but not used everywhere\n\nAction items:\n1. Use existing constants (ScopeProject, ScopeGlobal, FormatJSON, Tool*)\n2. Create new constants for test paths and platform checks\n3. Update all string literal references to use constants","acceptance_criteria":"- All 8 goconst issues resolved\n- Existing constants used consistently\n- New constants defined where appropriate\n- Code is more maintainable","status":"closed","priority":3,"issue_type":"task","created_at":"2025-10-26T10:11:30.99155-05:00","updated_at":"2025-10-26T12:53:18.228063-05:00","closed_at":"2025-10-26T12:53:18.228063-05:00","source_repo":".","labels":["cleanup","code-quality"]}
{"id":"blues-traveler-af8","content_hash":"49c1798d6a71aab6513d11c143fd7290626bfcaca171814c89ecb51b76f00725","title":"Reduce function length in overly long functions","description":"Several functions exceed the 60-line or 40-statement thresholds. Long functions are harder to understand, test, and maintain. Affected files include cmd/hooks_install.go, config/migration_test.go, and others.","design":"For each long function:\n1. Extract logical sections into well-named helper functions\n2. Move validation logic into separate validators\n3. Extract test setup/teardown into helper functions\n4. Use builder pattern for complex object construction","acceptance_criteria":"- All funlen linter warnings are resolved\n- Functions are \u003c= 60 lines and \u003c= 40 statements\n- Code is more modular and reusable\n- All tests pass","status":"open","priority":3,"issue_type":"chore","created_at":"2025-11-07T20:35:40.400905-06:00","updated_at":"2025-11-07T20:35:40.400905-06:00","source_repo":"."}
{"id":"blues-traveler-brq","content_hash":"f0efbc82144070f8c57b2a50a107dc4e3b4edb0a0404a37569cbc75c67db81f2","title":"Reduce cyclomatic complexity in hook functions","description":"Several hook functions exceed the cyclop threshold (max 10):\n\ninternal/hooks/audit.go:47 - preToolUseHandler (14)\ninternal/hooks/fetch_blocker.go:141 - loadBlockedPrefixes (11)\ninternal/hooks/security.go:177 - detectDangerousRm (12)\ninternal/hooks/security.go:242 - detectRecursiveOwnershipOrPerm (13)\n\nThese functions need refactoring to reduce branching complexity by extracting helper functions or simplifying logic.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T20:50:59.695985-06:00","updated_at":"2025-11-07T20:50:59.695985-06:00","source_repo":"."}
{"id":"blues-traveler-k8u","content_hash":"2d729c581a8006227ddb424c9bce8577b6b4d8843dc1f17e63146c40ea62d1fb","title":"Reduce complexity in config/migration functions","description":"Several migration and config functions exceed cyclop threshold (max 10):\n\ninternal/config/migration.go:55 - DiscoverLegacyConfigsWithScope (11)\ninternal/config/migration.go:347 - FormatMigrationResult (11)\n\nThese functions handle complex logic for discovering and migrating legacy configuration files. Consider extracting helper functions for validation, filtering, and formatting logic.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T20:52:21.346581-06:00","updated_at":"2025-11-07T20:52:21.346581-06:00","source_repo":"."}
{"id":"blues-traveler-kpv","content_hash":"3afd54c433fa70cfc1d453edea1ad7a44ea1c7b7491d2cd96f076becdcf7fdf0","title":"Reduce complexity and length in test functions","description":"Several test functions exceed cyclop and funlen thresholds:\n\nComplexity (cyclop \u003e 10):\n- internal/cmd/hooks_custom_init_test.go:142 - validateSanitizeError (13)\n- internal/cmd/hooks_doctor_test.go:170 - TestGetCandidateConfigPaths (11)\n- internal/config/enhanced_loading_test.go:250 - TestSaveConfigWithXDG (13)\n- internal/config/enhanced_loading_test.go:330 - TestGetConfigPath (14)\n- internal/config/migration_test.go:10 - TestLegacyConfigDiscovery (13)\n- internal/config/migration_test.go:93 - TestMigrationDryRun (14)\n- internal/config/migration_test.go:312 - TestMigrationSkipExisting (15)\n- internal/config/settings_test.go:105 - TestRemoveHookTypeFromSettings (14)\n- internal/config/xdg_test.go:285 - TestCleanupOrphanedConfigs (13)\n- internal/core/registry_concurrent_test.go:78 - TestRegistryBatchOperations (11)\n\nLength (funlen \u003e 60):\n- internal/cmd/hooks_custom_init_test.go:11 - TestSanitizeFileName (97 lines)\n- internal/cmd/hooks_custom_sync_test.go:7 - TestParseSyncOptions_EventValidation (63 lines)\n- internal/cmd/hooks_doctor_test.go:105 - TestCountHooksByEvent (62 lines)\n- internal/config/migration_test.go:193 - TestActualMigration (47 statements)\n- internal/config/migration_test.go:409 - TestGetMigrationStatus (48 statements)\n- internal/config/settings_test.go:7 - TestMatchesHookType (93 lines)\n- internal/config/xdg_test.go:101 - TestRegistryOperations (63 lines)\n- internal/core/events_test.go:73 - TestResolveEventAlias (80 lines)\n- internal/hooks/find_blocker_test.go:7 - TestIsFindCommand (87 lines)\n\nConsider using table-driven tests or extracting helper functions.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-07T20:52:02.96875-06:00","updated_at":"2025-11-07T20:52:02.96875-06:00","source_repo":"."}
{"id":"blues-traveler-pwg","content_hash":"a75dc91772eb55ece3a2c33da5726afee5377419d94efc3257da4a76402fca62","title":"Reduce function length in cmd package","description":"Several command builder functions exceed funlen threshold (60 lines, 40 statements):\n\ninternal/cmd/config_xdg.go:34 - NewConfigMigrateCmd (61 lines)\ninternal/cmd/generate.go:12 - NewGenerateCmd (73 lines)\ninternal/cmd/hooks_custom_init.go:15 - generateSampleConfig (62 lines)\ninternal/cmd/hooks_install.go:179 - newHooksInstallCommand (66 lines)\ninternal/cmd/hooks_install.go:251 - newHooksUninstallCommand (65 lines)\ninternal/cmd/hooks_install.go:326 - createSampleBlockedUrlsFile (65 lines)\n\nThese functions should be split into smaller, more focused functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T20:51:37.602639-06:00","updated_at":"2025-11-07T20:51:37.602639-06:00","source_repo":"."}
{"id":"blues-traveler-tpj","content_hash":"fbba8393ef31cb3c6357c88226aad51c7583d592eb7f41be0192c5842a170039","title":"Reduce cyclomatic complexity in high-complexity functions","description":"Multiple functions exceed the cyclomatic complexity threshold of 10, making them harder to test and maintain. Key offenders include: FormatMigrationResult (11), security detection functions (12-14), and various test functions.","design":"For each function exceeding complexity:\n1. Extract decision logic into smaller, focused helper functions\n2. Use early returns to reduce nesting\n3. Consider using table-driven approaches for conditional logic\n4. Split large switch statements into separate handler functions","acceptance_criteria":"- All cyclop linter warnings are resolved\n- Functions have complexity \u003c= 10\n- Code is more readable and testable\n- All tests pass","status":"open","priority":3,"issue_type":"chore","created_at":"2025-11-07T20:35:23.733632-06:00","updated_at":"2025-11-07T20:35:23.733632-06:00","source_repo":"."}
{"id":"blues-traveler-u78","content_hash":"cdbf0738145f244e33e275f1b03ea5fafa26fef96c64fe4de8b0514b1993c3da","title":"Refactor code duplication in config_hook.go handlers","description":"The dupl linter reports 4 instances of code duplication in internal/hooks/config_hook.go:\n- Lines 186-223 (preHandler) duplicates 225-262 (postHandler)\n- Lines 281-333 (handleCursorResponsePre) duplicates 336-388 (handleCursorResponsePost)\n\nThe duplication exists because Pre and Post handlers must return different interface types. Consider extracting common logic while preserving type safety.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T20:50:40.346675-06:00","updated_at":"2025-11-07T20:50:40.346675-06:00","source_repo":"."}
