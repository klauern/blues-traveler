package hooks

import (
	"context"
	"testing"

	"github.com/brads3290/cchooks"
	"{{.ModulePath}}/internal/core"
)

// Test{{.Name}}Hook tests the {{.LowerName}} hook functionality
func Test{{.Name}}Hook(t *testing.T) {
	// Setup mock context
	ctx := core.TestHookContext(nil)

	// Create hook instance
	hook := New{{.Name}}Hook(ctx)

	// Test basic properties
	if hook.Key() != "{{.LowerName}}" {
		t.Errorf("Expected key '{{.LowerName}}', got '%s'", hook.Key())
	}

	if hook.Name() != "{{.Name}} Hook" {
		t.Errorf("Expected name '{{.Name}} Hook', got '%s'", hook.Name())
	}

	// Test that hook is enabled by default
	if !hook.IsEnabled() {
		t.Error("Expected hook to be enabled by default")
	}

	// Test running the hook (should not error)
	err := hook.Run()
	if err != nil {
		t.Errorf("Hook run failed: %v", err)
	}
}

// Test{{.Name}}HookDisabled tests the hook when disabled
func Test{{.Name}}HookDisabled(t *testing.T) {
	// Setup mock context with disabled setting
	disabledSettings := map[string]bool{"{{.LowerName}}": false}
	ctx := core.TestHookContext(disabledSettings)

	hook := New{{.Name}}Hook(ctx)

	// Test that hook is disabled
	if hook.IsEnabled() {
		t.Error("Expected hook to be disabled")
	}

	// Running disabled hook should still work but skip execution
	err := hook.Run()
	if err != nil {
		t.Errorf("Disabled hook run failed: %v", err)
	}
}
